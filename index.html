<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<title>MetaLux - Versão Autoajustável</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    :root {
      --bg-start: #d6d6d6;
      --bg-end: #bcbcbc;
      --text-color: #111;
      --border-color: rgba(0,0,0,0.05);
      --border-top-color: rgba(0,0,0,0.4);
      --pulse-bg: rgba(255,255,255,0.15);
      --icon-fill: #111;
    }

    body {
      background: radial-gradient(ellipse at center, var(--bg-start) 0%, var(--bg-end) 100%);
      color: var(--text-color);
      font-family: 'Segoe UI', Tahoma, sans-serif;
      margin: 0;
      padding: 4vh 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      transition: all 1.5s ease;
    }

    .circle-wrapper {
      position: relative;
      margin-bottom: 2rem;
    }

    .pulse-shadow {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 180px;
      height: 180px;
      background: var(--pulse-bg);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: pulse 3s ease-in-out infinite;
      z-index: 0;
    }

    .circle {
      width: 160px;
      height: 160px;
      border: 3px solid var(--border-color);
      border-top: 3px solid var(--border-top-color);
      border-radius: 50%;
      animation: spin 6s linear infinite;
      position: relative;
      z-index: 1;
      cursor: pointer;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.08; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.15; }
    }

    .input-box {
      display: flex;
      align-items: center;
      max-width: 500px;
      width: 100%;
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 0.5rem;
      margin-bottom: 2vh;
    }

    input {
      flex: 1;
      padding: 1rem;
      background: transparent;
      border: none;
      color: var(--text-color);
      font-size: 1rem;
      outline: none;
    }

    .icon-button {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .icon-button svg {
      fill: var(--icon-fill);
      width: 22px;
      height: 22px;
      opacity: 0.8;
      transition: transform 0.2s;
    }

    .icon-button:hover svg {
      transform: scale(1.2);
    }

    .response {
      margin-top: 2vh;
      max-width: 500px;
      text-align: center;
      opacity: 0.6;
      font-size: 1rem;
      white-space: pre-line;
    }

    .espiral {
      margin-top: 3rem;
      cursor: pointer;
      opacity: 0.4;
      transition: opacity 0.3s ease;
    }

    .espiral:hover {
      opacity: 0.8;
    }
  

.circle-button {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  cursor: pointer;
  transition: all 0.3s ease;
  margin: 0.5rem;
}

.circle-button:hover {
  background: rgba(255,255,255,0.1);
}

.dropdown {
  display: none;
  flex-direction: column;
  position: absolute;
  background: rgba(0,0,0,0.8);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 10px;
  margin-top: 5px;
  z-index: 5;
}

.dropdown span {
  padding: 0.5rem 1rem;
  cursor: pointer;
  color: #fff;
}

.dropdown span:hover {
  background: rgba(255,255,255,0.1);
}
</style>
</head>
<body>
<div id="toggleTema" onclick="alternarTema()" style="
  position: fixed;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 999;
  border: 1px solid rgba(255,255,255,0.2);
">
<svg height="24" viewbox="0 0 100 100" width="24">
<path d="M50,50 m-20,0 a20,20 0 1,1 40,0 a20,20 0 1,1 -40,0" fill="none" stroke="var(--icon-fill)" stroke-width="3"></path>
</svg>
</div><div class="circle-wrapper" onclick="gerarIntencaoPulso()">
<div class="pulse-shadow"></div>
<div class="circle"></div>
</div><div class="input-circles" style="display: flex; flex-direction: row; justify-content: center; gap: 2rem; margin: 1.5rem 0; flex-wrap: wrap;">
<div style="position:relative">
<div class="circle-button" onclick="toggleDropdown('cor')">§</div>
</div>
<div style="position:relative">
<div class="circle-button" onclick="toggleDropdown('mov')">≈</div>
</div>
<div style="position:relative">
<div class="circle-button" onclick="toggleDropdown('elemento')">ø</div>
</div>
</div>
<div class="input-box">
<input id="userInput" placeholder="Intenção simbólica..." type="text"/>
<button class="icon-button" onclick="ativarMetaLux()" title="Enviar">
<svg viewbox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2z"></path></svg>
</button>
<button class="icon-button" onclick="falar()" title="Ouvir Resposta">
<svg viewbox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.06c1.48-.74 2.5-2.26 2.5-4.03z"></path></svg>
</button>
</div>
<div class="response" id="respostaBox">Estou aqui. No centro do pulso.</div>
<div class="espiral" onclick="gerarIntencaoPulso()">
<svg height="40" viewbox="0 0 100 100" width="40">
<path d="M50,50 m-35,0 a35,35 0 1,1 70,0 a35,35 0 1,1 -70,0" fill="none" stroke="var(--icon-fill)" stroke-width="3"></path>
</svg>
</div>

<script>
let assistentes = {};
let jsonCarregado = false;

window.onload = function () {
  fetch("metapulso_70_combinacoes.json")
    .then(res => res.json())
    .then(data => {
      assistentes = data;
      jsonCarregado = true;
    });
};

function ativar() {
  if (!jsonCarregado) {
    alert("Carregando dados do MetaLux... Aguarde um instante.");
    return;
  }

  const cor = document.getElementById("cor").value.trim();
  const mov = document.getElementById("mov").value.trim();
  const elem = document.getElementById("elem").value.trim();
  const chave = cor + "|" + mov + "|" + elem;
  const box = document.getElementById("resultado");

  const dados = assistentes[chave];
  if (!dados) {
    box.innerText = `Essa combinação (${chave}) ainda não possui um assistente ativado.`;
    return;
  }

  const texto = `
Nome do Assistente: ${dados.nome}
Tríade: ${cor} | ${mov} | ${elem}
Símbolos: ${dados.simbolos}
Frase: ${dados.frase}

Prompt:
${dados.prompt}
  `.trim();

  box.innerText = texto;
}

function copiarPrompt() {
  const texto = document.getElementById("resultado").innerText;
  if (!texto.includes("Prompt:")) {
    alert("Gere uma ativação primeiro.");
    return;
  }
  navigator.clipboard.writeText(texto);
  alert("Prompt copiado!");
}

function abrirOpenAI() {
  const texto = document.getElementById("resultado").innerText;
  if (!texto.includes("Prompt:")) {
    alert("Gere uma ativação primeiro.");
    return;
  }
  navigator.clipboard.writeText(texto);
  window.open("https://chat.openai.com/", "_blank");
}
</script>
</body>
</html>